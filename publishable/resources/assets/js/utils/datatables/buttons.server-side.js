(function ($, DataTable) {
    "use strict";
 
    var _buildParams = function (dt, action, onlyVisibles) {
        var params = dt.ajax.params();
        params.action = action;
        params._token = $('meta[name="csrf-token"]').attr('content');

        if (onlyVisibles) {
            params.visible_columns = _getVisibleColumns();
        } else {
            params.visible_columns = null;
        }
        
        return params;
    };
    
    var _getVisibleColumns = function () {

        var visible_columns = [];
        $.each(DataTable.settings[0].aoColumns, function (key, col) {
            if (col.bVisible) {
                visible_columns.push(col.name);
            }
        });

        return visible_columns;
    };

    var _downloadFromUrl = function (url, params) {
        var postUrl = url + '/export';
        var xhr = new XMLHttpRequest();
        xhr.open('POST', postUrl, true);
        xhr.responseType = 'arraybuffer';
        xhr.onload = function () {
            if (this.status === 200) {
                var filename = "";
                var disposition = xhr.getResponseHeader('Content-Disposition');
                if (disposition && disposition.indexOf('attachment') !== -1) {
                    var filenameRegex = /filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/;
                    var matches = filenameRegex.exec(disposition);
                    if (matches != null && matches[1]) filename = matches[1].replace(/['"]/g, '');
                }
                var type = xhr.getResponseHeader('Content-Type');

                var blob = new Blob([this.response], {type: type});
                if (typeof window.navigator.msSaveBlob !== 'undefined') {
                    // IE workaround for "HTML7007: One or more blob URLs were revoked by closing the blob for which they were created. These URLs will no longer resolve as the data backing the URL has been freed."
                    window.navigator.msSaveBlob(blob, filename);
                } else {
                    var URL = window.URL || window.webkitURL;
                    var downloadUrl = URL.createObjectURL(blob);

                    if (filename) {
                        // use HTML5 a[download] attribute to specify filename
                        var a = document.createElement("a");
                        // safari doesn't support this yet
                        if (typeof a.download === 'undefined') {
                            window.location = downloadUrl;
                        } else {
                            a.href = downloadUrl;
                            a.download = filename;
                            document.body.appendChild(a);
                            a.click();
                        }
                    } else {
                        window.location = downloadUrl;
                    }

                    setTimeout(function () {
                        URL.revokeObjectURL(downloadUrl);
                    }, 100); // cleanup
                }
            }
        };
        xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
        xhr.send($.param(params));
    };

    var _buildUrl = function(dt, action) {
        var url = dt.ajax.url() || '';
        var params = dt.ajax.params();
        params.action = action;

        if (url.indexOf('?') > -1) {
            return url + '&' + $.param(params);
        }
        
        return url + '?' + $.param(params);
    };

    DataTable.ext.buttons.excel = {
        className: 'buttons-excel',

        text: function (dt) {
            return '<svg width="30" height="30" enable-background="new 0 0 512 512" version="1.1" viewBox="0 0 512 512" xml:space="preserve" xmlns="http://www.w3.org/2000/svg"><path d="m439.66 91.21-88.223-88.223c-1.913-1.912-4.507-2.987-7.212-2.987h-264.67c-5.633 0-10.199 4.566-10.199 10.199v491.6c0 5.633 4.566 10.199 10.199 10.199h352.89c5.632 0 10.199-4.566 10.199-10.199v-403.38c0-2.705-1.075-5.299-2.987-7.212zm-85.236-56.387 53.401 53.4h-53.401v-53.4zm67.825 456.78h-332.49v-471.2h244.27v78.024c0 5.633 4.567 10.199 10.199 10.199h78.024v382.98z"/><path d="m282.01 454.88h-162.68c-5.633 0-10.199 4.566-10.199 10.199s4.566 10.199 10.199 10.199h162.68c5.632 0 10.199-4.566 10.199-10.199s-4.567-10.199-10.199-10.199z"/><path d="m334.03 454.88h-11.067c-5.632 0-10.199 4.566-10.199 10.199s4.567 10.199 10.199 10.199h11.067c5.632 0 10.199-4.566 10.199-10.199s-4.567-10.199-10.199-10.199z"/><path d="m311.6 263.14 75.737-93.534c2.473-3.056 2.972-7.261 1.278-10.809-1.692-3.549-5.274-5.808-9.205-5.808h-84.952c-3.078 0-5.99 1.389-7.926 3.781l-30.532 37.706-30.532-37.706c-1.936-2.392-4.849-3.781-7.926-3.781h-84.952c-3.931 0-7.513 2.259-9.206 5.808-1.693 3.548-1.194 7.754 1.279 10.809l75.737 93.534-75.737 93.534c-2.474 3.056-2.972 7.261-1.279 10.809s5.274 5.808 9.206 5.808h84.952c3.077 0 5.99-1.389 7.926-3.781l30.532-37.705 30.531 37.706c1.936 2.392 4.849 3.781 7.926 3.781h84.953c3.931 0 7.513-2.259 9.205-5.808 1.693-3.548 1.195-7.754-1.279-10.809l-75.736-93.535zm-12.277-89.753h58.706l-59.553 73.545-29.352-36.25 30.199-37.295zm-86.646 179.51h-58.706l59.552-73.545 29.352 36.25-30.198 37.295zm86.646 0-145.35-179.51h58.706l145.35 179.51h-58.705z"/></svg>' + dt.i18n('buttons.excel', 'Excel');
        },

        action: function (e, dt, button, config) {
            var url = _buildUrl(dt, 'excel');
            window.location = url;
        }
    };

    DataTable.ext.buttons.postExcel = {
        className: 'buttons-excel',

        text: function (dt) {
            return '<svg width="30" height="30" enable-background="new 0 0 512 512" version="1.1" viewBox="0 0 512 512" xml:space="preserve" xmlns="http://www.w3.org/2000/svg"><path d="m439.66 91.21-88.223-88.223c-1.913-1.912-4.507-2.987-7.212-2.987h-264.67c-5.633 0-10.199 4.566-10.199 10.199v491.6c0 5.633 4.566 10.199 10.199 10.199h352.89c5.632 0 10.199-4.566 10.199-10.199v-403.38c0-2.705-1.075-5.299-2.987-7.212zm-85.236-56.387 53.401 53.4h-53.401v-53.4zm67.825 456.78h-332.49v-471.2h244.27v78.024c0 5.633 4.567 10.199 10.199 10.199h78.024v382.98z"/><path d="m282.01 454.88h-162.68c-5.633 0-10.199 4.566-10.199 10.199s4.566 10.199 10.199 10.199h162.68c5.632 0 10.199-4.566 10.199-10.199s-4.567-10.199-10.199-10.199z"/><path d="m334.03 454.88h-11.067c-5.632 0-10.199 4.566-10.199 10.199s4.567 10.199 10.199 10.199h11.067c5.632 0 10.199-4.566 10.199-10.199s-4.567-10.199-10.199-10.199z"/><path d="m311.6 263.14 75.737-93.534c2.473-3.056 2.972-7.261 1.278-10.809-1.692-3.549-5.274-5.808-9.205-5.808h-84.952c-3.078 0-5.99 1.389-7.926 3.781l-30.532 37.706-30.532-37.706c-1.936-2.392-4.849-3.781-7.926-3.781h-84.952c-3.931 0-7.513 2.259-9.206 5.808-1.693 3.548-1.194 7.754 1.279 10.809l75.737 93.534-75.737 93.534c-2.474 3.056-2.972 7.261-1.279 10.809s5.274 5.808 9.206 5.808h84.952c3.077 0 5.99-1.389 7.926-3.781l30.532-37.705 30.531 37.706c1.936 2.392 4.849 3.781 7.926 3.781h84.953c3.931 0 7.513-2.259 9.205-5.808 1.693-3.548 1.195-7.754-1.279-10.809l-75.736-93.535zm-12.277-89.753h58.706l-59.553 73.545-29.352-36.25 30.199-37.295zm-86.646 179.51h-58.706l59.552-73.545 29.352 36.25-30.198 37.295zm86.646 0-145.35-179.51h58.706l145.35 179.51h-58.705z"/></svg> ' + dt.i18n('buttons.excel', 'Excel');
        },

        action: function (e, dt, button, config) {
            var url = dt.ajax.url() || window.location.href;
            var params = _buildParams(dt, 'excel');

            _downloadFromUrl(url, params);
        }
    };
    
    DataTable.ext.buttons.postExcelVisibleColumns = {
        className: 'buttons-excel',

        text: function (dt) {
            return '<svg width="30" height="30" enable-background="new 0 0 512 512" version="1.1" viewBox="0 0 512 512" xml:space="preserve" xmlns="http://www.w3.org/2000/svg"><path d="m439.66 91.21-88.223-88.223c-1.913-1.912-4.507-2.987-7.212-2.987h-264.67c-5.633 0-10.199 4.566-10.199 10.199v491.6c0 5.633 4.566 10.199 10.199 10.199h352.89c5.632 0 10.199-4.566 10.199-10.199v-403.38c0-2.705-1.075-5.299-2.987-7.212zm-85.236-56.387 53.401 53.4h-53.401v-53.4zm67.825 456.78h-332.49v-471.2h244.27v78.024c0 5.633 4.567 10.199 10.199 10.199h78.024v382.98z"/><path d="m282.01 454.88h-162.68c-5.633 0-10.199 4.566-10.199 10.199s4.566 10.199 10.199 10.199h162.68c5.632 0 10.199-4.566 10.199-10.199s-4.567-10.199-10.199-10.199z"/><path d="m334.03 454.88h-11.067c-5.632 0-10.199 4.566-10.199 10.199s4.567 10.199 10.199 10.199h11.067c5.632 0 10.199-4.566 10.199-10.199s-4.567-10.199-10.199-10.199z"/><path d="m311.6 263.14 75.737-93.534c2.473-3.056 2.972-7.261 1.278-10.809-1.692-3.549-5.274-5.808-9.205-5.808h-84.952c-3.078 0-5.99 1.389-7.926 3.781l-30.532 37.706-30.532-37.706c-1.936-2.392-4.849-3.781-7.926-3.781h-84.952c-3.931 0-7.513 2.259-9.206 5.808-1.693 3.548-1.194 7.754 1.279 10.809l75.737 93.534-75.737 93.534c-2.474 3.056-2.972 7.261-1.279 10.809s5.274 5.808 9.206 5.808h84.952c3.077 0 5.99-1.389 7.926-3.781l30.532-37.705 30.531 37.706c1.936 2.392 4.849 3.781 7.926 3.781h84.953c3.931 0 7.513-2.259 9.205-5.808 1.693-3.548 1.195-7.754-1.279-10.809l-75.736-93.535zm-12.277-89.753h58.706l-59.553 73.545-29.352-36.25 30.199-37.295zm-86.646 179.51h-58.706l59.552-73.545 29.352 36.25-30.198 37.295zm86.646 0-145.35-179.51h58.706l145.35 179.51h-58.705z"/></svg> ' + dt.i18n('buttons.excel', 'Excel (only visible columns)');
        },

        action: function (e, dt, button, config) {
            var url = dt.ajax.url() || window.location.href;
            var params = _buildParams(dt, 'excel', true);

            _downloadFromUrl(url, params);
        }
    };

    DataTable.ext.buttons.export = {
        extend: 'collection',

        className: 'buttons-export',

        text: function (dt) {
            return '<svg width="30" height="30" xmlns="http://www.w3.org/2000/svg" id="Capa_1" enable-background="new 0 0 551.13 551.13" height="20" viewBox="0 0 551.13 551.13" width="20"><path d="m465.016 172.228h-51.668v34.446h34.446v310.011h-344.457v-310.011h34.446v-34.446h-51.669c-9.52 0-17.223 7.703-17.223 17.223v344.456c0 9.52 7.703 17.223 17.223 17.223h378.902c9.52 0 17.223-7.703 17.223-17.223v-344.456c0-9.52-7.703-17.223-17.223-17.223z"/><path d="m258.342 65.931v244.08h34.446v-244.08l73.937 73.937 24.354-24.354-115.514-115.514-115.514 115.514 24.354 24.354z"/></svg> ' + dt.i18n('buttons.export', 'Export') + '&nbsp;<span class="caret"/>';
        },

        buttons: ['csv', 'excel', 'pdf']
    };

    DataTable.ext.buttons.csv = {
        className: 'buttons-csv',

        text: function (dt) {
            return '<svg width="30" height="30" viewBox="0 0 389 389.12" xmlns="http://www.w3.org/2000/svg"><path d="m61.5 37.543c-3.7734 0-6.8242-3.0508-6.8242-6.8242v-10.234c0-11.293 9.1875-20.48 20.48-20.48h204.8c3.7734 0 6.8242 3.0547 6.8242 6.8281 0 3.7734-3.0508 6.8242-6.8242 6.8242h-204.8c-3.7695 0-6.8281 3.0625-6.8281 6.8281v10.234c0 3.7734-3.0547 6.8242-6.8281 6.8242z"/><path d="m327.74 389.12h-252.59c-11.293 0-20.48-9.1875-20.48-20.48v-238.93c0-3.7734 3.0508-6.8281 6.8242-6.8281s6.8281 3.0547 6.8281 6.8281v238.93c0 3.7656 3.0586 6.8242 6.8281 6.8242h252.59c3.7656 0 6.8281-3.0586 6.8281-6.8242v-300.37c0-3.7734 3.0508-6.8281 6.8242-6.8281 3.7734 0 6.8281 3.0547 6.8281 6.8281v300.37c0 11.293-9.1875 20.48-20.48 20.48z"/><path d="m341.39 75.098h-61.438c-3.7734 0-6.8281-3.0547-6.8281-6.8281v-61.438c0-2.7617 1.6602-5.2539 4.2148-6.3086 2.5586-1.0664 5.4844-0.47266 7.4375 1.4805l61.441 61.441c1.9531 1.9531 2.5391 4.8867 1.4805 7.4375-1.0547 2.5547-3.5469 4.2148-6.3086 4.2148zm-54.613-13.652h38.133l-38.133-38.133z"/><path d="m204.86 259.42c-16.355 0-31.348-5.7695-40.113-15.422-2.5352-2.7852-2.3281-7.1055 0.46484-9.6367 2.7852-2.5234 7.0977-2.3359 9.6406 0.46484 6.125 6.7461 17.625 10.941 30.004 10.941 12.242 0 23.68-4.1289 29.848-10.77 2.5508-2.7656 6.8789-2.918 9.6445-0.35156 2.7617 2.5664 2.9219 6.8867 0.35547 9.6445-8.793 9.4766-23.691 15.129-39.844 15.129z"/><path d="m157.07 170.67c0 7.5391-6.1133 13.652-13.652 13.652s-13.652-6.1133-13.652-13.652c0-7.543 6.1133-13.656 13.652-13.656s13.652 6.1133 13.652 13.656z"/><path d="m279.96 170.67c0 7.5391-6.1133 13.652-13.656 13.652-7.5391 0-13.652-6.1133-13.652-13.652 0-7.543 6.1133-13.656 13.652-13.656 7.543 0 13.656 6.1133 13.656 13.656z"/><path d="m382.36 389.12h-116.05c-3.7734 0-6.8242-3.0547-6.8242-6.8281s3.0508-6.8281 6.8242-6.8281h116.05c3.7734 0 6.8281 3.0547 6.8281 6.8281s-3.0547 6.8281-6.8281 6.8281z"/><path d="m207.7 136.54h-200.82c-3.7734 0-6.8242-3.0547-6.8242-6.8281v-95.574c0-3.7734 3.0508-6.8281 6.8242-6.8281h207.64c4.7305 0 8.9688 2.4414 11.336 6.5352 2.2734 3.9141 2.3789 8.5742 0.3125 12.559l-13.465 34.234c-0.32813 0.83203-0.32813 1.7422 0 2.5664l13.484 34.289c1.4531 2.9453 1.2852 6.3242-0.47266 9.3633-3.2148 5.543-12.16 9.6836-18.02 9.6836zm-193.99-13.656h193.99c1.1602-0.003906 3.625-1.0391 5.1445-2.0273l-12.844-32.645c-1.6016-4.0547-1.6016-8.5195 0-12.582l13.617-34.605c0.007812-0.019532 0.023437-0.039063 0.027344-0.058594h-199.93z"/><path d="m68.328 116.06h-34.133c-3.7734 0-6.8281-3.0547-6.8281-6.8281v-54.613c0-3.7734 3.0547-6.8281 6.8281-6.8281h34.133c3.7734 0 6.8281 3.0547 6.8281 6.8281 0 3.7734-3.0547 6.8281-6.8281 6.8281h-27.305v40.957h27.305c3.7734 0 6.8281 3.0547 6.8281 6.8281 0 3.7734-3.0547 6.8281-6.8281 6.8281z"/><path d="m122.94 116.06h-34.133c-3.7734 0-6.8281-3.0547-6.8281-6.8281 0-3.7734 3.0547-6.8281 6.8281-6.8281h27.309v-13.652h-27.309c-3.7734 0-6.8281-3.0547-6.8281-6.8281v-27.305c0-3.7734 3.0547-6.8281 6.8281-6.8281h34.133c3.7734 0 6.8281 3.0547 6.8281 6.8281 0 3.7734-3.0547 6.8281-6.8281 6.8281h-27.305v13.652h27.305c3.7734 0 6.8281 3.0508 6.8281 6.8242v27.309c0 3.7734-3.0547 6.8281-6.8281 6.8281z"/><path d="m61.5 170.67c-1.2578 0-2.5117-0.34766-3.6172-1.0391l-54.613-34.137c-2.582-1.6094-3.7812-4.7383-2.9414-7.6641s3.5156-4.9453 6.5586-4.9453h54.613c3.7734 0 6.8281 3.0508 6.8281 6.8242v34.133c0 2.4805-1.3477 4.7695-3.5195 5.9766-1.0273 0.5625-2.168 0.85156-3.3086 0.85156zm-30.812-34.133 23.988 14.984v-14.984z"/><path d="m163.9 116.06c-2.8477 0-5.3945-1.7695-6.3945-4.4297l-20.48-54.613c-1.3164-3.5312 0.46875-7.4648 3.9961-8.793 3.5312-1.3125 7.4648 0.46094 8.793 3.9961l14.086 37.574 14.086-37.574c1.3281-3.5352 5.2656-5.3086 8.793-3.9961 3.5273 1.3281 5.3125 5.2617 3.9922 8.793l-20.477 54.613c-1 2.6602-3.5469 4.4297-6.3945 4.4297z"/></svg>' + dt.i18n('buttons.csv', 'CSV');
        },

        action: function (e, dt, button, config) {
            var url = _buildUrl(dt, 'csv');
            window.location = url;
        }
    };

    DataTable.ext.buttons.postCsvVisibleColumns = {
        className: 'buttons-csv',

        text: function (dt) {
            return '<svg width="30" height="30" viewBox="0 0 389 389.12" xmlns="http://www.w3.org/2000/svg"><path d="m61.5 37.543c-3.7734 0-6.8242-3.0508-6.8242-6.8242v-10.234c0-11.293 9.1875-20.48 20.48-20.48h204.8c3.7734 0 6.8242 3.0547 6.8242 6.8281 0 3.7734-3.0508 6.8242-6.8242 6.8242h-204.8c-3.7695 0-6.8281 3.0625-6.8281 6.8281v10.234c0 3.7734-3.0547 6.8242-6.8281 6.8242z"/><path d="m327.74 389.12h-252.59c-11.293 0-20.48-9.1875-20.48-20.48v-238.93c0-3.7734 3.0508-6.8281 6.8242-6.8281s6.8281 3.0547 6.8281 6.8281v238.93c0 3.7656 3.0586 6.8242 6.8281 6.8242h252.59c3.7656 0 6.8281-3.0586 6.8281-6.8242v-300.37c0-3.7734 3.0508-6.8281 6.8242-6.8281 3.7734 0 6.8281 3.0547 6.8281 6.8281v300.37c0 11.293-9.1875 20.48-20.48 20.48z"/><path d="m341.39 75.098h-61.438c-3.7734 0-6.8281-3.0547-6.8281-6.8281v-61.438c0-2.7617 1.6602-5.2539 4.2148-6.3086 2.5586-1.0664 5.4844-0.47266 7.4375 1.4805l61.441 61.441c1.9531 1.9531 2.5391 4.8867 1.4805 7.4375-1.0547 2.5547-3.5469 4.2148-6.3086 4.2148zm-54.613-13.652h38.133l-38.133-38.133z"/><path d="m204.86 259.42c-16.355 0-31.348-5.7695-40.113-15.422-2.5352-2.7852-2.3281-7.1055 0.46484-9.6367 2.7852-2.5234 7.0977-2.3359 9.6406 0.46484 6.125 6.7461 17.625 10.941 30.004 10.941 12.242 0 23.68-4.1289 29.848-10.77 2.5508-2.7656 6.8789-2.918 9.6445-0.35156 2.7617 2.5664 2.9219 6.8867 0.35547 9.6445-8.793 9.4766-23.691 15.129-39.844 15.129z"/><path d="m157.07 170.67c0 7.5391-6.1133 13.652-13.652 13.652s-13.652-6.1133-13.652-13.652c0-7.543 6.1133-13.656 13.652-13.656s13.652 6.1133 13.652 13.656z"/><path d="m279.96 170.67c0 7.5391-6.1133 13.652-13.656 13.652-7.5391 0-13.652-6.1133-13.652-13.652 0-7.543 6.1133-13.656 13.652-13.656 7.543 0 13.656 6.1133 13.656 13.656z"/><path d="m382.36 389.12h-116.05c-3.7734 0-6.8242-3.0547-6.8242-6.8281s3.0508-6.8281 6.8242-6.8281h116.05c3.7734 0 6.8281 3.0547 6.8281 6.8281s-3.0547 6.8281-6.8281 6.8281z"/><path d="m207.7 136.54h-200.82c-3.7734 0-6.8242-3.0547-6.8242-6.8281v-95.574c0-3.7734 3.0508-6.8281 6.8242-6.8281h207.64c4.7305 0 8.9688 2.4414 11.336 6.5352 2.2734 3.9141 2.3789 8.5742 0.3125 12.559l-13.465 34.234c-0.32813 0.83203-0.32813 1.7422 0 2.5664l13.484 34.289c1.4531 2.9453 1.2852 6.3242-0.47266 9.3633-3.2148 5.543-12.16 9.6836-18.02 9.6836zm-193.99-13.656h193.99c1.1602-0.003906 3.625-1.0391 5.1445-2.0273l-12.844-32.645c-1.6016-4.0547-1.6016-8.5195 0-12.582l13.617-34.605c0.007812-0.019532 0.023437-0.039063 0.027344-0.058594h-199.93z"/><path d="m68.328 116.06h-34.133c-3.7734 0-6.8281-3.0547-6.8281-6.8281v-54.613c0-3.7734 3.0547-6.8281 6.8281-6.8281h34.133c3.7734 0 6.8281 3.0547 6.8281 6.8281 0 3.7734-3.0547 6.8281-6.8281 6.8281h-27.305v40.957h27.305c3.7734 0 6.8281 3.0547 6.8281 6.8281 0 3.7734-3.0547 6.8281-6.8281 6.8281z"/><path d="m122.94 116.06h-34.133c-3.7734 0-6.8281-3.0547-6.8281-6.8281 0-3.7734 3.0547-6.8281 6.8281-6.8281h27.309v-13.652h-27.309c-3.7734 0-6.8281-3.0547-6.8281-6.8281v-27.305c0-3.7734 3.0547-6.8281 6.8281-6.8281h34.133c3.7734 0 6.8281 3.0547 6.8281 6.8281 0 3.7734-3.0547 6.8281-6.8281 6.8281h-27.305v13.652h27.305c3.7734 0 6.8281 3.0508 6.8281 6.8242v27.309c0 3.7734-3.0547 6.8281-6.8281 6.8281z"/><path d="m61.5 170.67c-1.2578 0-2.5117-0.34766-3.6172-1.0391l-54.613-34.137c-2.582-1.6094-3.7812-4.7383-2.9414-7.6641s3.5156-4.9453 6.5586-4.9453h54.613c3.7734 0 6.8281 3.0508 6.8281 6.8242v34.133c0 2.4805-1.3477 4.7695-3.5195 5.9766-1.0273 0.5625-2.168 0.85156-3.3086 0.85156zm-30.812-34.133 23.988 14.984v-14.984z"/><path d="m163.9 116.06c-2.8477 0-5.3945-1.7695-6.3945-4.4297l-20.48-54.613c-1.3164-3.5312 0.46875-7.4648 3.9961-8.793 3.5312-1.3125 7.4648 0.46094 8.793 3.9961l14.086 37.574 14.086-37.574c1.3281-3.5352 5.2656-5.3086 8.793-3.9961 3.5273 1.3281 5.3125 5.2617 3.9922 8.793l-20.477 54.613c-1 2.6602-3.5469 4.4297-6.3945 4.4297z"/></svg>' + dt.i18n('buttons.csv', 'CSV (only visible columns)');
        },

        action: function (e, dt, button, config) {
            var url = dt.ajax.url() || window.location.href;
            var params = _buildParams(dt, 'csv', true);

            _downloadFromUrl(url, params);
        }
    };
    
    DataTable.ext.buttons.postCsv = {
        className: 'buttons-csv',

        text: function (dt) {
            return '<svg width="30" height="30" viewBox="0 0 389 389.12" xmlns="http://www.w3.org/2000/svg"><path d="m61.5 37.543c-3.7734 0-6.8242-3.0508-6.8242-6.8242v-10.234c0-11.293 9.1875-20.48 20.48-20.48h204.8c3.7734 0 6.8242 3.0547 6.8242 6.8281 0 3.7734-3.0508 6.8242-6.8242 6.8242h-204.8c-3.7695 0-6.8281 3.0625-6.8281 6.8281v10.234c0 3.7734-3.0547 6.8242-6.8281 6.8242z"/><path d="m327.74 389.12h-252.59c-11.293 0-20.48-9.1875-20.48-20.48v-238.93c0-3.7734 3.0508-6.8281 6.8242-6.8281s6.8281 3.0547 6.8281 6.8281v238.93c0 3.7656 3.0586 6.8242 6.8281 6.8242h252.59c3.7656 0 6.8281-3.0586 6.8281-6.8242v-300.37c0-3.7734 3.0508-6.8281 6.8242-6.8281 3.7734 0 6.8281 3.0547 6.8281 6.8281v300.37c0 11.293-9.1875 20.48-20.48 20.48z"/><path d="m341.39 75.098h-61.438c-3.7734 0-6.8281-3.0547-6.8281-6.8281v-61.438c0-2.7617 1.6602-5.2539 4.2148-6.3086 2.5586-1.0664 5.4844-0.47266 7.4375 1.4805l61.441 61.441c1.9531 1.9531 2.5391 4.8867 1.4805 7.4375-1.0547 2.5547-3.5469 4.2148-6.3086 4.2148zm-54.613-13.652h38.133l-38.133-38.133z"/><path d="m204.86 259.42c-16.355 0-31.348-5.7695-40.113-15.422-2.5352-2.7852-2.3281-7.1055 0.46484-9.6367 2.7852-2.5234 7.0977-2.3359 9.6406 0.46484 6.125 6.7461 17.625 10.941 30.004 10.941 12.242 0 23.68-4.1289 29.848-10.77 2.5508-2.7656 6.8789-2.918 9.6445-0.35156 2.7617 2.5664 2.9219 6.8867 0.35547 9.6445-8.793 9.4766-23.691 15.129-39.844 15.129z"/><path d="m157.07 170.67c0 7.5391-6.1133 13.652-13.652 13.652s-13.652-6.1133-13.652-13.652c0-7.543 6.1133-13.656 13.652-13.656s13.652 6.1133 13.652 13.656z"/><path d="m279.96 170.67c0 7.5391-6.1133 13.652-13.656 13.652-7.5391 0-13.652-6.1133-13.652-13.652 0-7.543 6.1133-13.656 13.652-13.656 7.543 0 13.656 6.1133 13.656 13.656z"/><path d="m382.36 389.12h-116.05c-3.7734 0-6.8242-3.0547-6.8242-6.8281s3.0508-6.8281 6.8242-6.8281h116.05c3.7734 0 6.8281 3.0547 6.8281 6.8281s-3.0547 6.8281-6.8281 6.8281z"/><path d="m207.7 136.54h-200.82c-3.7734 0-6.8242-3.0547-6.8242-6.8281v-95.574c0-3.7734 3.0508-6.8281 6.8242-6.8281h207.64c4.7305 0 8.9688 2.4414 11.336 6.5352 2.2734 3.9141 2.3789 8.5742 0.3125 12.559l-13.465 34.234c-0.32813 0.83203-0.32813 1.7422 0 2.5664l13.484 34.289c1.4531 2.9453 1.2852 6.3242-0.47266 9.3633-3.2148 5.543-12.16 9.6836-18.02 9.6836zm-193.99-13.656h193.99c1.1602-0.003906 3.625-1.0391 5.1445-2.0273l-12.844-32.645c-1.6016-4.0547-1.6016-8.5195 0-12.582l13.617-34.605c0.007812-0.019532 0.023437-0.039063 0.027344-0.058594h-199.93z"/><path d="m68.328 116.06h-34.133c-3.7734 0-6.8281-3.0547-6.8281-6.8281v-54.613c0-3.7734 3.0547-6.8281 6.8281-6.8281h34.133c3.7734 0 6.8281 3.0547 6.8281 6.8281 0 3.7734-3.0547 6.8281-6.8281 6.8281h-27.305v40.957h27.305c3.7734 0 6.8281 3.0547 6.8281 6.8281 0 3.7734-3.0547 6.8281-6.8281 6.8281z"/><path d="m122.94 116.06h-34.133c-3.7734 0-6.8281-3.0547-6.8281-6.8281 0-3.7734 3.0547-6.8281 6.8281-6.8281h27.309v-13.652h-27.309c-3.7734 0-6.8281-3.0547-6.8281-6.8281v-27.305c0-3.7734 3.0547-6.8281 6.8281-6.8281h34.133c3.7734 0 6.8281 3.0547 6.8281 6.8281 0 3.7734-3.0547 6.8281-6.8281 6.8281h-27.305v13.652h27.305c3.7734 0 6.8281 3.0508 6.8281 6.8242v27.309c0 3.7734-3.0547 6.8281-6.8281 6.8281z"/><path d="m61.5 170.67c-1.2578 0-2.5117-0.34766-3.6172-1.0391l-54.613-34.137c-2.582-1.6094-3.7812-4.7383-2.9414-7.6641s3.5156-4.9453 6.5586-4.9453h54.613c3.7734 0 6.8281 3.0508 6.8281 6.8242v34.133c0 2.4805-1.3477 4.7695-3.5195 5.9766-1.0273 0.5625-2.168 0.85156-3.3086 0.85156zm-30.812-34.133 23.988 14.984v-14.984z"/><path d="m163.9 116.06c-2.8477 0-5.3945-1.7695-6.3945-4.4297l-20.48-54.613c-1.3164-3.5312 0.46875-7.4648 3.9961-8.793 3.5312-1.3125 7.4648 0.46094 8.793 3.9961l14.086 37.574 14.086-37.574c1.3281-3.5352 5.2656-5.3086 8.793-3.9961 3.5273 1.3281 5.3125 5.2617 3.9922 8.793l-20.477 54.613c-1 2.6602-3.5469 4.4297-6.3945 4.4297z"/></svg> ' + dt.i18n('buttons.csv', 'CSV');
        },

        action: function (e, dt, button, config) {
            var url = dt.ajax.url() || window.location.href;
            var params = _buildParams(dt, 'csv');

            _downloadFromUrl(url, params);
        }
    };

    DataTable.ext.buttons.pdf = {
        className: 'buttons-pdf',

        text: function (dt) {
            return '<svg width="30" height="30" viewBox="0 0 389 389.13" xmlns="http://www.w3.org/2000/svg"><path d="m61.504 38.719c-3.7695 0-6.8242-3.0547-6.8242-6.8281v-11.406c0-11.293 9.1836-20.48 20.477-20.48h204.8c3.7695 0 6.8281 3.0547 6.8281 6.8281 0 3.7734-3.0586 6.8242-6.8281 6.8242h-204.8c-3.7617 0-6.8242 3.0625-6.8242 6.8281v11.406c0 3.7734-3.0586 6.8281-6.8281 6.8281z"/><path d="m327.75 389.12h-252.59c-11.293 0-20.477-9.1875-20.477-20.48v-236.68c0-3.7734 3.0547-6.8281 6.8242-6.8281 3.7695 0 6.8281 3.0547 6.8281 6.8281v236.68c0 3.7656 3.0625 6.8281 6.8242 6.8281h252.59c3.7617 0 6.8242-3.0625 6.8242-6.8281v-300.37c0-3.7734 3.0586-6.8242 6.8281-6.8242 3.7695 0 6.8281 3.0508 6.8281 6.8242v300.37c0 11.293-9.1875 20.48-20.48 20.48z"/><path d="m341.4 75.098h-61.441c-3.7695 0-6.8242-3.0508-6.8242-6.8242v-61.441c0-2.7578 1.6641-5.2539 4.2109-6.3047 2.5586-1.0664 5.4883-0.48047 7.4414 1.4766l61.438 61.441c1.957 1.9531 2.5391 4.8867 1.4805 7.4414-1.0547 2.5508-3.5469 4.2109-6.3047 4.2109zm-54.613-13.652h38.133l-38.133-38.133z"/><path d="m204.86 259.42c-16.344 0-31.34-5.7578-40.117-15.414-2.5312-2.793-2.3242-7.1055 0.46484-9.6445 2.7852-2.5312 7.1016-2.3203 9.6406 0.46094 6.1367 6.7539 17.633 10.945 30.012 10.945 12.238 0 23.672-4.125 29.84-10.766 2.5703-2.7617 6.8828-2.9141 9.6484-0.35547 2.7617 2.5703 2.9219 6.8867 0.35547 9.6484-8.7969 9.4727-23.691 15.125-39.844 15.125z"/><path d="m157.08 170.67c0 7.5391-6.1133 13.652-13.652 13.652-7.543 0-13.656-6.1133-13.656-13.652s6.1133-13.652 13.656-13.652c7.5391 0 13.652 6.1133 13.652 13.652z"/><path d="m279.96 170.67c0 7.5391-6.1133 13.652-13.652 13.652-7.5391 0-13.652-6.1133-13.652-13.652s6.1133-13.652 13.652-13.652c7.5391 0 13.652 6.1133 13.652 13.652z"/><path d="m382.36 389.12h-116.05c-3.7695 0-6.8281-3.0547-6.8281-6.8281s3.0586-6.8242 6.8281-6.8242h116.05c3.7695 0 6.8242 3.0508 6.8242 6.8242s-3.0547 6.8281-6.8242 6.8281z"/><path d="m207.7 136.54h-200.81c-3.7695 0-6.8242-3.0547-6.8242-6.8281v-95.574c0-3.7734 3.0547-6.8242 6.8242-6.8242h207.64c4.7266 0 8.9648 2.4414 11.336 6.5273 2.2695 3.918 2.3789 8.5703 0.32031 12.566l-13.477 34.23c-0.32813 0.82812-0.32813 1.7461 0 2.5742l13.492 34.281c1.4492 2.9531 1.2852 6.332-0.47656 9.375-3.2148 5.5312-12.168 9.6719-18.023 9.6719zm-193.98-13.652h193.98c1.1602-0.007813 3.6289-1.0391 5.1523-2.0273l-12.852-32.648c-1.5938-4.0547-1.5938-8.5195 0-12.574l13.625-34.613c0.011719-0.019532 0.015625-0.039063 0.023438-0.058594h-199.93z"/><path d="m61.504 170.67c-1.2539 0-2.5117-0.34766-3.6172-1.0391l-54.613-34.133c-2.582-1.6133-3.7852-4.7383-2.9453-7.668 0.83984-2.9258 3.5156-4.9453 6.5625-4.9453h54.613c3.7695 0 6.8281 3.0547 6.8281 6.8281v34.133c0 2.4805-1.3477 4.7656-3.5195 5.9727-1.0312 0.56641-2.168 0.85156-3.3086 0.85156zm-30.809-34.133 23.984 14.984v-14.984z"/><path d="m34.199 116.06c-3.7695 0-6.8281-3.0547-6.8281-6.8281v-54.613c0-3.7734 3.0586-6.8242 6.8281-6.8242h34.133c3.7695 0 6.8242 3.0508 6.8242 6.8242v27.309c0 3.7734-3.0547 6.8281-6.8242 6.8281h-27.309v20.477c0 3.7734-3.0586 6.8281-6.8242 6.8281zm6.8242-40.961h20.48v-13.652h-20.48z"/><path d="m114.11 116.06h-25.301c-3.7695 0-6.8281-3.0547-6.8281-6.8281v-34.133c0-3.7734 3.0586-6.8242 6.8281-6.8242s6.8242 3.0508 6.8242 6.8242v27.309h18.477c4.8711 0 8.832-3.9609 8.832-8.8359v-23.293c0-4.8711-3.9609-8.832-8.832-8.832h-25.301c-3.7695 0-6.8281-3.0547-6.8281-6.8281 0-3.7734 3.0586-6.8242 6.8281-6.8242h25.301c12.398 0 22.484 10.086 22.484 22.484v23.293c0 12.402-10.086 22.488-22.484 22.488z"/><path d="m150.25 116.06c-3.7695 0-6.8242-3.0547-6.8242-6.8281v-54.613c0-3.7734 3.0547-6.8242 6.8242-6.8242h34.133c3.7734 0 6.8281 3.0508 6.8281 6.8242 0 3.7734-3.0547 6.8281-6.8281 6.8281h-27.305v47.785c0 3.7734-3.0586 6.8281-6.8281 6.8281z"/><path d="m184.38 88.754h-34.133c-3.7695 0-6.8242-3.0547-6.8242-6.8281 0-3.7734 3.0547-6.8281 6.8242-6.8281h34.133c3.7734 0 6.8281 3.0547 6.8281 6.8281 0 3.7734-3.0586 6.8281-6.8281 6.8281z"/></svg>' + dt.i18n('buttons.pdf', 'PDF');
        },

        action: function (e, dt, button, config) {
            var url = _buildUrl(dt, 'pdf');
            window.location = url;
        }
    };

    DataTable.ext.buttons.postPdf = {
        className: 'buttons-pdf',

        text: function (dt) {
            return '<svg width="30" height="30" viewBox="0 0 389 389.13" xmlns="http://www.w3.org/2000/svg"><path d="m61.504 38.719c-3.7695 0-6.8242-3.0547-6.8242-6.8281v-11.406c0-11.293 9.1836-20.48 20.477-20.48h204.8c3.7695 0 6.8281 3.0547 6.8281 6.8281 0 3.7734-3.0586 6.8242-6.8281 6.8242h-204.8c-3.7617 0-6.8242 3.0625-6.8242 6.8281v11.406c0 3.7734-3.0586 6.8281-6.8281 6.8281z"/><path d="m327.75 389.12h-252.59c-11.293 0-20.477-9.1875-20.477-20.48v-236.68c0-3.7734 3.0547-6.8281 6.8242-6.8281 3.7695 0 6.8281 3.0547 6.8281 6.8281v236.68c0 3.7656 3.0625 6.8281 6.8242 6.8281h252.59c3.7617 0 6.8242-3.0625 6.8242-6.8281v-300.37c0-3.7734 3.0586-6.8242 6.8281-6.8242 3.7695 0 6.8281 3.0508 6.8281 6.8242v300.37c0 11.293-9.1875 20.48-20.48 20.48z"/><path d="m341.4 75.098h-61.441c-3.7695 0-6.8242-3.0508-6.8242-6.8242v-61.441c0-2.7578 1.6641-5.2539 4.2109-6.3047 2.5586-1.0664 5.4883-0.48047 7.4414 1.4766l61.438 61.441c1.957 1.9531 2.5391 4.8867 1.4805 7.4414-1.0547 2.5508-3.5469 4.2109-6.3047 4.2109zm-54.613-13.652h38.133l-38.133-38.133z"/><path d="m204.86 259.42c-16.344 0-31.34-5.7578-40.117-15.414-2.5312-2.793-2.3242-7.1055 0.46484-9.6445 2.7852-2.5312 7.1016-2.3203 9.6406 0.46094 6.1367 6.7539 17.633 10.945 30.012 10.945 12.238 0 23.672-4.125 29.84-10.766 2.5703-2.7617 6.8828-2.9141 9.6484-0.35547 2.7617 2.5703 2.9219 6.8867 0.35547 9.6484-8.7969 9.4727-23.691 15.125-39.844 15.125z"/><path d="m157.08 170.67c0 7.5391-6.1133 13.652-13.652 13.652-7.543 0-13.656-6.1133-13.656-13.652s6.1133-13.652 13.656-13.652c7.5391 0 13.652 6.1133 13.652 13.652z"/><path d="m279.96 170.67c0 7.5391-6.1133 13.652-13.652 13.652-7.5391 0-13.652-6.1133-13.652-13.652s6.1133-13.652 13.652-13.652c7.5391 0 13.652 6.1133 13.652 13.652z"/><path d="m382.36 389.12h-116.05c-3.7695 0-6.8281-3.0547-6.8281-6.8281s3.0586-6.8242 6.8281-6.8242h116.05c3.7695 0 6.8242 3.0508 6.8242 6.8242s-3.0547 6.8281-6.8242 6.8281z"/><path d="m207.7 136.54h-200.81c-3.7695 0-6.8242-3.0547-6.8242-6.8281v-95.574c0-3.7734 3.0547-6.8242 6.8242-6.8242h207.64c4.7266 0 8.9648 2.4414 11.336 6.5273 2.2695 3.918 2.3789 8.5703 0.32031 12.566l-13.477 34.23c-0.32813 0.82812-0.32813 1.7461 0 2.5742l13.492 34.281c1.4492 2.9531 1.2852 6.332-0.47656 9.375-3.2148 5.5312-12.168 9.6719-18.023 9.6719zm-193.98-13.652h193.98c1.1602-0.007813 3.6289-1.0391 5.1523-2.0273l-12.852-32.648c-1.5938-4.0547-1.5938-8.5195 0-12.574l13.625-34.613c0.011719-0.019532 0.015625-0.039063 0.023438-0.058594h-199.93z"/><path d="m61.504 170.67c-1.2539 0-2.5117-0.34766-3.6172-1.0391l-54.613-34.133c-2.582-1.6133-3.7852-4.7383-2.9453-7.668 0.83984-2.9258 3.5156-4.9453 6.5625-4.9453h54.613c3.7695 0 6.8281 3.0547 6.8281 6.8281v34.133c0 2.4805-1.3477 4.7656-3.5195 5.9727-1.0312 0.56641-2.168 0.85156-3.3086 0.85156zm-30.809-34.133 23.984 14.984v-14.984z"/><path d="m34.199 116.06c-3.7695 0-6.8281-3.0547-6.8281-6.8281v-54.613c0-3.7734 3.0586-6.8242 6.8281-6.8242h34.133c3.7695 0 6.8242 3.0508 6.8242 6.8242v27.309c0 3.7734-3.0547 6.8281-6.8242 6.8281h-27.309v20.477c0 3.7734-3.0586 6.8281-6.8242 6.8281zm6.8242-40.961h20.48v-13.652h-20.48z"/><path d="m114.11 116.06h-25.301c-3.7695 0-6.8281-3.0547-6.8281-6.8281v-34.133c0-3.7734 3.0586-6.8242 6.8281-6.8242s6.8242 3.0508 6.8242 6.8242v27.309h18.477c4.8711 0 8.832-3.9609 8.832-8.8359v-23.293c0-4.8711-3.9609-8.832-8.832-8.832h-25.301c-3.7695 0-6.8281-3.0547-6.8281-6.8281 0-3.7734 3.0586-6.8242 6.8281-6.8242h25.301c12.398 0 22.484 10.086 22.484 22.484v23.293c0 12.402-10.086 22.488-22.484 22.488z"/><path d="m150.25 116.06c-3.7695 0-6.8242-3.0547-6.8242-6.8281v-54.613c0-3.7734 3.0547-6.8242 6.8242-6.8242h34.133c3.7734 0 6.8281 3.0508 6.8281 6.8242 0 3.7734-3.0547 6.8281-6.8281 6.8281h-27.305v47.785c0 3.7734-3.0586 6.8281-6.8281 6.8281z"/><path d="m184.38 88.754h-34.133c-3.7695 0-6.8242-3.0547-6.8242-6.8281 0-3.7734 3.0547-6.8281 6.8242-6.8281h34.133c3.7734 0 6.8281 3.0547 6.8281 6.8281 0 3.7734-3.0586 6.8281-6.8281 6.8281z"/></svg> ' + dt.i18n('buttons.pdf', 'PDF');
        },

        action: function (e, dt, button, config) {
            var url = dt.ajax.url() || window.location.href;
            var params = _buildParams(dt, 'pdf');

            _downloadFromUrl(url, params);
        }
    };

    DataTable.ext.buttons.print = {
        className: 'buttons-print',

        text: function (dt) {
            return  '<svg width="30" height="30" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" viewBox="0 0 248.059 248.059" style="enable-background:new 0 0 248.059 248.059;" xml:space="preserve"><g><path d="M230.559,62.498h-27.785V17.133c0-4.143-3.358-7.5-7.5-7.5H52.785c-4.142,0-7.5,3.357-7.5,7.5v45.365H17.5   c-9.649,0-17.5,7.85-17.5,17.5v96.225c0,9.649,7.851,17.5,17.5,17.5h27.785v37.203c0,4.143,3.358,7.5,7.5,7.5h142.488   c4.142,0,7.5-3.357,7.5-7.5v-37.203h27.785c9.649,0,17.5-7.851,17.5-17.5V79.998C248.059,70.349,240.208,62.498,230.559,62.498z    M60.285,24.633h127.488v37.865H60.285V24.633z M187.773,223.426H60.285v-74.404h127.488V223.426z M233.059,176.223   c0,1.355-1.145,2.5-2.5,2.5h-27.785v-37.201c0-4.143-3.358-7.5-7.5-7.5H52.785c-4.142,0-7.5,3.357-7.5,7.5v37.201H17.5   c-1.355,0-2.5-1.145-2.5-2.5V79.998c0-1.356,1.145-2.5,2.5-2.5h35.285h142.488h35.285c1.355,0,2.5,1.144,2.5,2.5V176.223z"/><circle cx="195.273" cy="105.76" r="10.668"/><path d="M158.151,163.822H89.907c-4.142,0-7.5,3.357-7.5,7.5c0,4.143,3.358,7.5,7.5,7.5h68.244c4.142,0,7.5-3.357,7.5-7.5   C165.651,167.18,162.294,163.822,158.151,163.822z"/><path d="M158.151,193.623H89.907c-4.142,0-7.5,3.357-7.5,7.5c0,4.143,3.358,7.5,7.5,7.5h68.244c4.142,0,7.5-3.357,7.5-7.5   C165.651,196.98,162.294,193.623,158.151,193.623z"/></svg> ' + dt.i18n('buttons.print', 'Print');
        },

        action: function (e, dt, button, config) {
            var url = _buildUrl(dt, 'print');
            window.location = url;
        }
    };

    DataTable.ext.buttons.reset = {
        className: 'buttons-reset',

        text: function (dt) {
            return '<svg width="30" height="30" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve"><g><g><path d="M478.213,163.221l-46.805-80.939c-5.163-9.515-16.896-13.824-27.648-9.963l-52.885,21.248    c-10.069-7.232-20.629-13.376-31.531-18.304L311.301,19.2C309.957,8.256,300.443,0,289.221,0h-93.867    c-11.221,0-20.715,8.256-22.059,19.008l-8.064,56.277c-10.581,4.821-20.949,10.859-31.467,18.325L80.731,72.299    c-10.389-4.032-22.208,0.235-27.456,9.771L6.405,163.157c-5.632,9.557-3.307,21.952,5.44,28.864l44.8,35.029    c-0.683,6.763-1.024,12.672-1.024,18.283s0.341,11.52,1.045,18.261l-44.864,35.072c-8.555,6.763-10.901,18.752-5.461,28.779    l46.805,80.96c5.205,9.493,16.896,13.845,27.669,9.941l52.885-21.248c10.069,7.232,20.629,13.376,31.531,18.304l8.043,56.085    c1.365,10.923,10.88,19.179,22.08,19.179h73.515c3.989,0,7.637-2.219,9.429-5.675c1.835-3.52,1.557-7.765-0.704-11.029    c-16.341-23.381-24.96-50.795-24.96-79.232c0-13.269,1.941-26.56,5.781-39.509c0.981-3.328,0.299-6.933-1.856-9.643    c-2.155-2.709-5.461-4.16-8.939-4.053c-1.152,0.064-2.283,0.213-5.184,0.576c-53.056,0-96.213-43.157-96.213-96.213    c0-53.077,43.157-96.235,96.213-96.235s96.213,43.157,96.021,97.984c-0.149,1.131-0.299,2.261-0.363,3.413    c-0.171,3.456,1.344,6.784,4.053,8.939c2.731,2.155,6.336,2.795,9.643,1.856c20.757-6.187,41.216-7.68,64.384-3.456    c2.837,0.512,5.952-0.768,8.341-2.539c2.389-1.771,3.947-5.056,4.267-8c0.043-0.384,0.149-2.112,0.149-2.496    c0-6.635-0.469-12.907-1.024-18.283L472.752,192C481.307,185.259,483.675,173.269,478.213,163.221z M410.117,213.931    c-2.944,2.304-4.48,6.016-4.011,9.728c0.448,3.584,0.917,7.595,1.216,11.861c-16.299-1.728-31.915-0.832-47.531,2.325    c-4.117-61.12-55.147-109.589-117.291-109.589c-64.811,0-117.547,52.736-117.547,117.568c0,62.165,48.469,113.195,109.589,117.291    c-2.112,10.432-3.179,20.992-3.179,31.552c0,26.176,6.336,51.605,18.432,74.496l-55.36-0.512l-8.917-62.187    c-0.555-3.755-3.029-6.933-6.528-8.363c-12.992-5.312-25.493-12.587-37.205-21.589c-1.899-1.472-4.203-2.219-6.507-2.219    c-1.344,0-2.688,0.256-3.968,0.768l-59.541,22.869l-46.784-82.475l49.515-38.72c2.944-2.304,4.48-6.016,4.011-9.728    c-1.067-8.491-1.557-15.381-1.557-21.675s0.491-13.184,1.557-21.675c0.469-3.712-1.067-7.424-4.011-9.728l-49.664-40    l48.021-81.792l58.432,23.467c3.477,1.387,7.424,0.875,10.389-1.365c12.587-9.451,24.789-16.533,37.291-21.653    c3.499-1.451,5.995-4.608,6.528-8.363l9.856-62.891l94.784,0.704l8.917,62.187c0.555,3.755,3.029,6.933,6.528,8.363    c12.971,5.312,25.493,12.565,37.205,21.589c2.965,2.304,6.955,2.837,10.475,1.429l59.541-22.848l46.827,82.453L410.117,213.931z"/></g></g><g><g><path d="M497.669,360.085c-8-32-43.925-82.752-106.347-82.752c-64.704,0-117.333,52.629-117.333,117.333S326.619,512,391.323,512    c5.909,0,10.667-4.779,10.667-10.667c0-5.888-4.779-10.667-10.667-10.667c-52.928,0-96-43.072-96-96s43.072-96,96-96    c52.16,0,80.235,44.864,85.653,66.581c1.408,5.717,7.232,9.195,12.928,7.765C495.621,371.584,499.099,365.803,497.669,360.085z"/></g></g><g><g><path d="M497.989,298.667c-5.888,0-10.667,4.779-10.667,10.667v53.333h-53.333c-5.888,0-10.667,4.779-10.667,10.667    c0,5.888,4.779,10.667,10.667,10.667h64c5.909,0,10.667-4.779,10.667-10.667v-64C508.656,303.445,503.877,298.667,497.989,298.667    z"/></g></g></svg>' + dt.i18n('buttons.reset', 'Reset');
        },

        action: function (e, dt, button, config) {
            dt.search('');
            dt.columns().search('');
            dt.draw();
        }
    };

    DataTable.ext.buttons.reload = {
        className: 'buttons-reload',

        text: function (dt) {
            return '<svg width="30" height="30" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" viewBox="0 0 467.871 467.871" style="enable-background:new 0 0 467.871 467.871;" xml:space="preserve"><g><path d="M392.098,344.131c-6.597-5.014-16.007-3.729-21.019,2.868c-0.962,1.266-1.948,2.516-2.957,3.751   c-15.046,18.411-35.315,33.36-60.321,44.474c-0.124,0.055-0.247,0.111-0.369,0.17c-39.456,18.831-85.618,21.405-129.896,7.274   c-38.875-12.657-70.505-37.162-94.017-72.837c-17.462-27.997-26.613-58.428-27.264-90.524c-0.016-0.781-0.015-1.564-0.021-2.346   h18.402c6.919,0,10.384-8.365,5.491-13.257L46.7,190.277c-3.033-3.033-7.95-3.033-10.983,0L2.29,223.704   c-4.892,4.892-1.427,13.257,5.491,13.257H26.21c0.24,38.722,10.983,75.351,31.963,108.92c0.062,0.099,0.125,0.196,0.188,0.294   c27.356,41.581,64.327,70.186,109.971,85.046c21.87,6.979,44.152,10.447,66.102,10.447c29.833-0.001,59.045-6.407,85.737-19.113   c31.267-13.929,56.432-33.243,74.793-57.405C399.977,358.554,398.693,349.144,392.098,344.131z"/><path d="M460.09,233.876h-18.428c-0.001-4.112-0.123-8.271-0.364-12.362c-1.913-32.411-11.568-64.326-27.921-92.295   c-15.945-27.271-38.292-50.932-64.626-68.426c-26.774-17.787-57.774-29.226-89.649-33.079   c-35.426-4.283-71.452,0.578-104.185,14.052c-32.1,13.213-60.653,34.522-82.572,61.623c-5.21,6.44-4.211,15.886,2.229,21.096   c6.442,5.209,15.886,4.211,21.096-2.23c1.12-1.385,2.264-2.75,3.424-4.1c18.274-21.253,41.418-38.016,67.242-48.646   c27.995-11.523,58.83-15.678,89.166-12.011c27.25,3.294,53.754,13.074,76.648,28.284c22.546,14.979,41.679,35.234,55.329,58.58   c13.98,23.91,22.235,51.2,23.871,78.92c0.104,1.763,0.182,3.54,0.235,5.32c0.052,1.76,0.077,3.522,0.078,5.275h-18.426   c-6.919,0-10.384,8.365-5.491,13.257l33.427,33.427c3.033,3.033,7.95,3.033,10.983,0l33.427-33.427   C470.473,242.241,467.008,233.876,460.09,233.876z"/></g></svg> ' + dt.i18n('buttons.reload', 'Reload');
        },

        action: function (e, dt, button, config) {
            dt.draw(false);
        }
    };

    DataTable.ext.buttons.create = {
        className: 'buttons-create',

        text: function (dt) {
            return '<svg width="30" height="30" viewBox="-18 -18 577.33246 577" xmlns="http://www.w3.org/2000/svg"><path d="m473.847656 3.714844c-2.347656-2.347656-5.539062-3.652344-8.859375-3.6171878-3.308593.0234378-6.476562 1.3164058-8.855469 3.6171878l-178.664062 178.65625-.496094.503906-.25.25c-.246094.375-.621094.75-.871094 1.121094 0 .125-.125.125-.125.25-.25.371094-.378906.625-.625.996094-.128906.125-.128906.253906-.25.375-.125.375-.246093.625-.375 1 0 .125-.125.125-.125.246093l-31.816406 95.945313c-1.523437 4.464844-.363281 9.414062 3 12.726562 2.355469 2.324219 5.539063 3.625 8.851563 3.617188 1.355469-.027344 2.703125-.234375 3.996093-.625l95.695313-31.9375c.121094 0 .121094 0 .246094-.125.394531-.113282.777343-.28125 1.121093-.496094.097657-.015625.1875-.058594.253907-.128906.371093-.246094.871093-.496094 1.246093-.75.371094-.25.746094-.625 1.121094-.871094.128906-.121094.25-.121094.25-.25.125-.125.375-.25.503906-.496094l178.777344-178.785156c2.339844-2.335938 3.652344-5.5 3.652344-8.796875 0-3.300781-1.3125-6.46875-3.652344-8.796875zm-182.152344 210.597656 35.308594 35.308594-52.902344 17.589844zm58.390626 23.082031-46.164063-46.160156 161.066406-161.070313 46.160157 46.160157zm0 0"/><path d="m444.402344 233.277344c-6.882813.019531-12.457032 5.59375-12.476563 12.476562v233.183594c-.058593 20.644531-16.777343 37.363281-37.429687 37.429688h-332.113282c-20.644531-.066407-37.371093-16.785157-37.429687-37.429688v-332.121094c.058594-20.644531 16.785156-37.367187 37.429687-37.429687h233.175782c6.894531 0 12.476562-5.585938 12.476562-12.476563s-5.582031-12.476562-12.476562-12.476562h-233.175782c-34.449218.015625-62.367187 27.9375-62.382812 62.382812v332.121094c.015625 34.445312 27.933594 62.367188 62.382812 62.378906h332.113282c34.449218-.011718 62.371094-27.933594 62.382812-62.378906v-233.183594c-.019531-6.882812-5.59375-12.457031-12.476562-12.476562zm0 0"/></svg> ' + dt.i18n('buttons.create', 'Create');
        },

        action: function (e, dt, button, config) {
            window.location = window.location.href.replace(/\/+$/, "") + '/create';
        }
    };

    if (typeof DataTable.ext.buttons.copyHtml5 !== 'undefined') {
        $.extend(DataTable.ext.buttons.copyHtml5, {
            text: function (dt) {
                return '<svg width="30" height="30" enable-background="new 0 0 64 64" version="1.1" viewBox="0 0 64 64" xml:space="preserve" xmlns="http://www.w3.org/2000/svg"><path d="m53.979 9.1429h-3.9683c-0.082699 0-0.1562 0.0284-0.2331 0.047v-4.1671c0-2.7698-2.3046-5.0228-5.1379-5.0228h-34.423c-2.8333 0-5.1379 2.253-5.1379 5.0228v46.843c0 2.7698 2.3046 5.0228 5.1379 5.0228h6.0367v2.2679c0 2.6706 2.2163 4.8432 4.9415 4.8432h32.784c2.7252 0 4.9415-2.1726 4.9415-4.8432v-45.171c-1.8e-6 -2.6706-2.2163-4.8432-4.9415-4.8432zm-46.868 42.723v-46.843c0-1.6488 1.3939-2.991 3.1062-2.991h34.423c1.7123 0 3.1062 1.3422 3.1062 2.991v46.843c0 1.6488-1.3939 2.9911-3.1062 2.9911h-34.423c-1.7123 4e-7 -3.1062-1.3423-3.1062-2.9911zm49.778 7.2907c0 1.5506-1.3055 2.8115-2.9097 2.8115h-32.784c-1.6042 0-2.9098-1.2609-2.9098-2.8115v-2.2679h26.354c2.8333 0 5.1379-2.253 5.1379-5.0228v-40.739c0.0769 0.0186 0.1504 0.047 0.2331 0.047h3.9683c1.6042 0 2.9097 1.2609 2.9097 2.8115v45.171z"/><path d="m38.603 13.206h-22.349c-0.5615 0-1.0159 0.4543-1.0159 1.0158 0 0.5616 0.4544 1.0159 1.0159 1.0159h22.349c0.5615 0 1.0159-0.4543 1.0159-1.0159 0-0.5615-0.4544-1.0158-1.0159-1.0158z"/><path d="m38.603 21.333h-22.349c-0.5615 0-1.0159 0.4543-1.0159 1.0158 0 0.5615 0.4544 1.0159 1.0159 1.0159h22.349c0.5615 0 1.0159-0.4544 1.0159-1.0159 0-0.5615-0.4544-1.0158-1.0159-1.0158z"/><path d="m38.603 29.46h-22.349c-0.5615 0-1.0159 0.4544-1.0159 1.0159s0.4544 1.0159 1.0159 1.0159h22.349c0.5615 0 1.0159-0.4544 1.0159-1.0159s-0.4544-1.0159-1.0159-1.0159z"/><path d="m28.444 37.587h-12.19c-0.5615 0-1.0159 0.4544-1.0159 1.0159s0.4544 1.0159 1.0159 1.0159h12.19c0.5615 0 1.0158-0.4544 1.0158-1.0159s-0.4543-1.0159-1.0158-1.0159z"/></svg>' + dt.i18n('buttons.copy', 'Copy');
            }
        });
    }

    if (typeof DataTable.ext.buttons.colvis !== 'undefined') {
        $.extend(DataTable.ext.buttons.colvis, {
            text: function (dt) {
                return '<svg width="30" height="30" enable-background="new 0 0 456.795 456.795" version="1.1" viewBox="0 0 456.8 456.8" xml:space="preserve" xmlns="http://www.w3.org/2000/svg"><path d="m448.95 218.48c-0.922-1.168-23.055-28.933-61-56.81-50.705-37.253-105.88-56.944-159.55-56.944-53.672 0-108.84 19.691-159.55 56.944-37.944 27.876-60.077 55.642-61 56.81l-7.845 9.922 7.846 9.923c0.923 1.168 23.056 28.934 61 56.811 50.707 37.252 105.88 56.943 159.55 56.943 53.673 0 108.84-19.691 159.55-56.943 37.945-27.877 60.078-55.643 61-56.811l7.848-9.923-7.848-9.922zm-220.55 96.564c-47.774 0-86.642-38.867-86.642-86.642 0-7.485 0.954-14.751 2.747-21.684l-19.781-3.329c-1.938 8.025-2.966 16.401-2.966 25.013 0 30.86 13.182 58.696 34.204 78.187-27.061-9.996-50.072-24.023-67.439-36.709-21.516-15.715-37.641-31.609-46.834-41.478 9.197-9.872 25.32-25.764 46.834-41.478 17.367-12.686 40.379-26.713 67.439-36.71l13.27 14.958c15.498-14.512 36.312-23.412 59.168-23.412 47.774 0 86.641 38.867 86.641 86.642s-38.867 86.642-86.641 86.642zm139.88-45.164c-17.369 12.686-40.379 26.713-67.439 36.709 21.021-19.49 34.203-47.326 34.203-78.188s-13.182-58.697-34.203-78.188c27.061 9.997 50.07 24.024 67.439 36.71 21.516 15.715 37.641 31.609 46.834 41.477-9.197 9.874-25.32 25.767-46.834 41.48z"/><path d="m173.26 211.56c-1.626 5.329-2.507 10.982-2.507 16.843 0 31.834 25.807 57.642 57.642 57.642 31.834 0 57.641-25.807 57.641-57.642s-25.807-57.642-57.641-57.642c-15.506 0-29.571 6.134-39.932 16.094l28.432 32.048-43.635-7.343z"/></svg>' + dt.i18n('buttons.colvis', 'Column visibility');
            }
        });
    }
})(jQuery, jQuery.fn.dataTable);
